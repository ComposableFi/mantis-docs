"use strict";(self.webpackChunkmantis_docs=self.webpackChunkmantis_docs||[]).push([[635],{1924:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=n(4848),i=n(8453);const o={sidebar_position:1},r="The Mantis Protocol",a={id:"protocol/mantis",title:"The Mantis Protocol",description:"On the Mantis rollup resides the Mantis protocol that facilitates optimal execution of cross-domain intent via a competition of solvers. In this protocol, users sign intents which are contained on a private rollup mempool. Solvers are staked agents that can a) observe the intents in the mempool and b) post solutions to intents in the auctioneer contract. The auctioneer contract scores the solutions based on how well they fit constraints the user has set. The winner of the auction is responsible for settling the intent solution they have proposed.",source:"@site/docs/protocol/mantis.md",sourceDirName:"protocol",slug:"/protocol/mantis",permalink:"/protocol/mantis",draft:!1,unlisted:!1,editUrl:"https://github.com/ComposableFi/mantis-docs/docs/protocol/mantis.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"protocol",next:{title:"Solvers",permalink:"/protocol/solvers"}},l={},c=[{value:"Mantis V1",id:"mantis-v1",level:2},{value:"Intent Lifecycle",id:"intent-lifecycle",level:2},{value:"Trust Assumptions",id:"trust-assumptions",level:2}];function h(e){const t={a:"a",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"the-mantis-protocol",children:"The Mantis Protocol"})}),"\n",(0,s.jsx)(t.p,{children:"On the Mantis rollup resides the Mantis protocol that facilitates optimal execution of cross-domain intent via a competition of solvers. In this protocol, users sign intents which are contained on a private rollup mempool. Solvers are staked agents that can a) observe the intents in the mempool and b) post solutions to intents in the auctioneer contract. The auctioneer contract scores the solutions based on how well they fit constraints the user has set. The winner of the auction is responsible for settling the intent solution they have proposed."}),"\n",(0,s.jsx)(t.h2,{id:"mantis-v1",children:"Mantis V1"}),"\n",(0,s.jsx)(t.p,{children:"In its first iteration, the architecture of Mantis v1 is as follows:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Intents (preferences for a cross-chain transaction) are submitted to the Mantis interface via the Mantis rollup directly or via another IBC-connected chain like Solana or Ethereum."}),"\n",(0,s.jsx)(t.li,{children:"User funds are escrowed on the source chain or the rollup (where the intent is submitted)."}),"\n",(0,s.jsx)(t.li,{children:"All intents then flow to the Mantis rollup. From here, a smart contract on the Mantis rollup sends intents to an off-chain auctioneer."}),"\n",(0,s.jsx)(t.li,{children:"Information on intents is sent to solvers."}),"\n",(0,s.jsx)(t.li,{children:"Solvers submit solutions (e.g. the output amount of a swap) for user intents to the rollup."}),"\n",(0,s.jsx)(t.li,{children:"Solutions are scored off-chain by the auctioneer."}),"\n",(0,s.jsx)(t.li,{children:"Once the winning solution is determined, the solver that proposed it must execute the intent. he solver makes the necesary state transitions to the respective destination chains."}),"\n",(0,s.jsx)(t.li,{children:"Once the intent solution is executed, proof of success is sent to the rollup and the source chain via IBC."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This architectural flow is summarized below:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"mantis",src:n(3581).A+"",width:"1600",height:"510"})}),"\n",(0,s.jsx)(t.h2,{id:"intent-lifecycle",children:"Intent Lifecycle"}),"\n",(0,s.jsx)(t.p,{children:"The lifecycle of an intent on the Mantis protocol is as follows:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"The user expresses and signs an intent."}),"\n",(0,s.jsx)(t.li,{children:"The intent is sent to the intent database/mempool of the Mantis rollup."}),"\n",(0,s.jsx)(t.li,{children:"For a period of time, solvers propose different solutions to the intent. They submit these solutions to auction smart contracts on the Mantis rollup."}),"\n",(0,s.jsx)(t.li,{children:"The off-chain auctioneer holds an auction to score solutions, prioritizing best execution and adherence to any constraints set by the user."}),"\n",(0,s.jsx)(t.li,{children:"Based on these scores, the auctioneer picks the winning solution."}),"\n",(0,s.jsx)(t.li,{children:"The solver who proposed the winning solution must execute this solution on the destination chain. The IBC is used to unlock user funds. In case of the solver intent is not executed, a proof is send via IBC."}),"\n",(0,s.jsx)(t.li,{children:"If the winning solver misbehaves (by not settling the transaction or by settling it in a way that does not align with their proposed solution), they will be slashed."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This lifecycle is depicted in the diagram below:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"lifecycle",src:n(2688).A+"",width:"1600",height:"510"})}),"\n",(0,s.jsx)(t.h2,{id:"trust-assumptions",children:"Trust Assumptions"}),"\n",(0,s.jsx)(t.p,{children:"Trust assumptions of Mantis include:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"The IBC Protocol:"})}),"\n",(0,s.jsxs)(t.p,{children:["IBC is used for cross-domain verification of intents. IBC was selected as Mantis\u2019s mechanism because it is trust-minimized. An explanation of IBC\u2019s trust minimization compared to other bridging mechanisms is available ",(0,s.jsx)(t.a,{href:"https://medium.com/@Picasso_Network/ibc-as-the-end-game-of-bridging-a-comparison-analysis-on-trust-dcc01e0d9377",children:"here"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"The Auctioneer:"})}),"\n",(0,s.jsx)(t.p,{children:"On Mantis, trust is placed in the auctioneer (initially, an off-chain actor) to deposit escrowed user funds. However, the auctioneer's power is limited in scope. They can, at most, censor intents and solutions. They do not hold users' funds at any point in the process. Once a solver submits a solution, proof of this submission is made via IBC. This eliminates the need for trust in the auctioneer at this stage."}),"\n",(0,s.jsx)(t.p,{children:"The interests of the auctioneer are generally aligned with those of solvers and users. Better solutions typically result in higher fees paid to the auctioneer. The result is an incentive for fair and efficient operation. While off-chain agreements between solvers and the auctioneer are theoretically possible, such collusion would likely be statistically observable by other solvers. This provides a form of checks and balances within the system."}),"\n",(0,s.jsx)(t.p,{children:"This structure aims to create a trustless or trust-minimized environment where the auctioneer's role is important but constrained. Moreover, multiple parties have incentives to maintain the integrity of the system."})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},2688:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/intent-lifecycle-a695e08033306c17bc18e438fe404ef7.png"},3581:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/protocol-a695e08033306c17bc18e438fe404ef7.png"},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(6540);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);