"use strict";(self.webpackChunkmantis_docs=self.webpackChunkmantis_docs||[]).push([[785],{979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var s=n(4848),i=n(8453);const a={sidebar_position:7},o="Transaction Lifecycle",l={id:"rollup/tx-lifecycle",title:"Transaction Lifecycle",description:"Transactions settle down from layer 2 (the Mantis rollup) to layer 1 (the destination chain of the transaction):",source:"@site/docs/rollup/tx-lifecycle.md",sourceDirName:"rollup",slug:"/rollup/tx-lifecycle",permalink:"/rollup/tx-lifecycle",draft:!1,unlisted:!1,editUrl:"https://github.com/ComposableFi/mantis-docs/docs/rollup/tx-lifecycle.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"rollup",previous:{title:"Data Types",permalink:"/rollup/data-types"}},r={},c=[{value:"Finality of the L1",id:"finality-of-the-l1",level:2},{value:"Bridge Between L1 and L2",id:"bridge-between-l1-and-l2",level:2},{value:"Data Posted to the L1",id:"data-posted-to-the-l1",level:2}];function h(e){const t={a:"a",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"transaction-lifecycle",children:"Transaction Lifecycle"})}),"\n",(0,s.jsx)(t.p,{children:"Transactions settle down from layer 2 (the Mantis rollup) to layer 1 (the destination chain of the transaction):"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Transactions on the Mantis rollup are used to construct blocks by the Mantis rollup validators. In this way, rollup validators also act as block builders."}),"\n",(0,s.jsx)(t.li,{children:"The blocks of Mantis rollup transactions are picked up by the sequencer on Mantis."}),"\n",(0,s.jsx)(t.li,{children:"Sequencers send blocks to the Mantis bridge contract."}),"\n",(0,s.jsx)(t.li,{children:"The bridge contract subsequently sends transactions out over IBC using a light client that we have created between L1 and L2."}),"\n",(0,s.jsx)(t.li,{children:"Via the IBC, blocks of transactions post to the final layer 1."}),"\n",(0,s.jsx)(t.li,{children:"The layer 1 validates the layer 2 blocks; if the L1 says a transaction/block is invalid, the layer 2 rolls back."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This is also a change in the consensus algorithm that ensures finality of the L2. This is a change to the validator client we\u2019ve made."}),"\n",(0,s.jsx)(t.p,{children:"This transaction lifecycle is depicted in the following diagram:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"tx-cycle",src:n(1244).A+"",width:"1045",height:"1600"})}),"\n",(0,s.jsx)(t.h2,{id:"finality-of-the-l1",children:"Finality of the L1"}),"\n",(0,s.jsx)(t.p,{children:"As mentioned, the layer 1 that a transaction is being settled to validates the L2 Mantis rollup blocks. If the L1 says the transaction is invalid (i.e. the L1 does not accept the transaction), the Mantis rollup rolls back the transaction. The rollback fork choice for the Mantis rollup is based on the L1."}),"\n",(0,s.jsx)(t.h2,{id:"bridge-between-l1-and-l2",children:"Bridge Between L1 and L2"}),"\n",(0,s.jsxs)(t.p,{children:["The IBC is used to settle transactions down from the Mantis rollup to the respective L1 destination chain. This is accomplished via the Picasso Network\u2019s expansion of the IBC\u2019s connections to not only the ",(0,s.jsx)(t.a,{href:"https://hub.cosmos.network/",children:"Cosmos Hub"})," and ",(0,s.jsx)(t.a,{href:"https://v1.cosmos.network/sdk",children:"Cosmos SDK"})," chains that it originally linked, but also ",(0,s.jsx)(t.a,{href:"https://polkadot.network/",children:"Polkadot"})," and ",(0,s.jsx)(t.a,{href:"https://kusama.network/",children:"Kusama"})," parachains, ",(0,s.jsx)(t.a,{href:"https://ethereum.org/en/",children:"Ethereum"}),", and ",(0,s.jsx)(t.a,{href:"https://solana.com/",children:"Solana"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"data-posted-to-the-l1",children:"Data Posted to the L1"}),"\n",(0,s.jsx)(t.p,{children:"Data that is posted to the L1 includes:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The block header"}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.a,{href:"https://research.composable.finance/t/state-proofs-on-solana/332",children:"trie root commitment"})]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1244:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/tx-lifecycle-7016ef56053a75b561b9c5063f6777f9.png"},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>l});var s=n(6540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);